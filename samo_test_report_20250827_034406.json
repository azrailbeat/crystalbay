{
  "summary": {
    "total_tests": 12,
    "passed_tests": 11,
    "failed_tests": 1,
    "success_rate": 91.66666666666666,
    "test_date": "2025-08-27T03:44:06.632715"
  },
  "detailed_results": [
    {
      "test_name": "SAMO Data Structure",
      "success": true,
      "timestamp": "2025-08-27T03:44:06.531753",
      "details": {
        "missing_keys": [],
        "total_keys": 27,
        "hotels_count": 1558,
        "currencies_count": 5,
        "towns_count": 18,
        "all_keys": [
          "ADULT",
          "CHECKIN_BEG",
          "CHECKIN_END",
          "CHILD",
          "CHILD_IN_BED",
          "COMFORTABLE_SEATS",
          "CURRENCIES",
          "FILTER",
          "FREIGHT",
          "FREIGHTTYPE",
          "HOTELS",
          "HOTEL_TYPES",
          "MEALS",
          "MOMENT_CONFIRM",
          "NIGHTS_FROM",
          "NIGHTS_TILL",
          "NOTE",
          "PACKET_TYPES",
          "PROGRAMS",
          "PROGRAM_GROUPS",
          "ROOMS",
          "STARS",
          "TOURS",
          "TOUR_GROUPS",
          "TOUR_TYPES",
          "TOWNS",
          "UFILTERS"
        ],
        "summary": "Structure valid with 1558 hotels, 5 currencies, 18 towns"
      }
    },
    {
      "test_name": "Hotel Data Validation",
      "success": true,
      "timestamp": "2025-08-27T03:44:06.533385",
      "details": {
        "total_hotels": 1558,
        "missing_fields": [],
        "sample_hotel": {
          "id": 714,
          "name": "ADEMA BOUTIQUE 3*",
          "stars": 3,
          "star_display": "3*",
          "town_key": 1452,
          "latitude": "",
          "longitude": "",
          "website": ""
        },
        "star_distribution": {
          "3": 340,
          "4": 663,
          "5": 501,
          "8": 17,
          "7": 14,
          "2": 18,
          "12": 4,
          "16": 1
        },
        "unique_destinations": 75,
        "summary": "Validated 1558 hotels across 75 destinations"
      }
    },
    {
      "test_name": "API Endpoint /api/samo/get_currencies",
      "success": true,
      "timestamp": "2025-08-27T03:44:06.542218",
      "details": {
        "status_code": 200,
        "is_json": true,
        "response_size": 302,
        "data_keys": [
          "count",
          "data",
          "source",
          "success"
        ],
        "data_count": 5,
        "summary": "Endpoint responding with 200"
      }
    },
    {
      "test_name": "API Endpoint /api/samo/get_destinations",
      "success": true,
      "timestamp": "2025-08-27T03:44:06.552095",
      "details": {
        "status_code": 200,
        "is_json": true,
        "response_size": 5210,
        "data_keys": [
          "count",
          "data",
          "source",
          "success"
        ],
        "data_count": 75,
        "summary": "Endpoint responding with 200"
      }
    },
    {
      "test_name": "API Endpoint /api/samo/get_townfroms",
      "success": true,
      "timestamp": "2025-08-27T03:44:06.568076",
      "details": {
        "status_code": 200,
        "is_json": true,
        "response_size": 4053,
        "data_keys": [
          "data",
          "source",
          "success"
        ],
        "data_count": 2,
        "summary": "Endpoint responding with 200"
      }
    },
    {
      "test_name": "API Endpoint /api/samo/test_connection",
      "success": false,
      "timestamp": "2025-08-27T03:44:06.575252",
      "details": {
        "status_code": 404,
        "is_json": false,
        "response_size": 19944,
        "data_keys": [],
        "data_count": 0,
        "summary": "Endpoint responding with 404"
      }
    },
    {
      "test_name": "Valid Basic Search",
      "success": true,
      "timestamp": "2025-08-27T03:44:06.583842",
      "details": {
        "status_code": 200,
        "expected_success": true,
        "actual_success": true,
        "params": {
          "checkIn": "2025-08-28",
          "checkOut": "2025-09-04",
          "adults": "2",
          "currency": "USD"
        },
        "tour_count": 50,
        "summary": "API handled params appropriately"
      }
    },
    {
      "test_name": "Search with Star Filter",
      "success": true,
      "timestamp": "2025-08-27T03:44:06.592457",
      "details": {
        "status_code": 200,
        "expected_success": true,
        "actual_success": true,
        "params": {
          "checkIn": "2025-08-28",
          "checkOut": "2025-09-04",
          "stars": "5",
          "currency": "USD"
        },
        "tour_count": 50,
        "summary": "API handled params appropriately"
      }
    },
    {
      "test_name": "Search with Invalid Currency",
      "success": true,
      "timestamp": "2025-08-27T03:44:06.600409",
      "details": {
        "status_code": 200,
        "expected_success": false,
        "actual_success": true,
        "params": {
          "checkIn": "2025-08-28",
          "checkOut": "2025-09-04",
          "currency": "INVALID"
        },
        "tour_count": 50,
        "summary": "API handled params appropriately"
      }
    },
    {
      "test_name": "Empty Search Parameters",
      "success": true,
      "timestamp": "2025-08-27T03:44:06.607946",
      "details": {
        "status_code": 200,
        "expected_success": true,
        "actual_success": true,
        "params": {},
        "tour_count": 50,
        "summary": "API handled params appropriately"
      }
    },
    {
      "test_name": "Data Consistency",
      "success": true,
      "timestamp": "2025-08-27T03:44:06.627191",
      "details": {
        "processor_hotels": 1558,
        "processor_currencies": 5,
        "processor_destinations": 75,
        "api_currencies": 5,
        "api_destinations": 75,
        "currency_match": true,
        "destination_match": true,
        "consistency_score": 100.0,
        "summary": "Data consistency: 100.0%"
      }
    },
    {
      "test_name": "Lead/Booking Integration",
      "success": true,
      "timestamp": "2025-08-27T03:44:06.631573",
      "details": {
        "status_code": 200,
        "inquiry_data": {
          "customer_name": "Test Customer SAMO",
          "customer_phone": "+1234567890",
          "customer_email": "test.samo@example.com",
          "source": "samo_api_test",
          "interest": "Vietnam Beach Tours - Da Nang",
          "tour_details": {
            "destination": "Da Nang",
            "check_in": "2025-09-03",
            "check_out": "2025-09-10",
            "adults": 2,
            "children": 0,
            "star_rating": 5
          },
          "notes": "SAMO API integration test booking - automated"
        },
        "response": {
          "lead_id": "lead_1756266246",
          "message": "Lead created successfully",
          "success": true
        },
        "summary": "Booking inquiry processed"
      }
    }
  ]
}